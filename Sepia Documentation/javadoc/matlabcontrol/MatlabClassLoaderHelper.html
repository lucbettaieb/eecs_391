

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MatlabClassLoaderHelper &mdash; SEPIA Documentation 0.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="SEPIA Documentation 0.1.0 documentation" href="../../index.html"/>
        <link rel="up" title="matlabcontrol" href="package-index.html"/>
        <link rel="next" title="MatlabConnectionException" href="MatlabConnectionException.html"/>
        <link rel="prev" title="MatlabBroadcaster" href="MatlabBroadcaster.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> SEPIA Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../setup.html">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../setup.html#eclipse-project-setup">Eclipse Project Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../running_sepia.html">Running Sepia</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../running_sepia.html#adding-a-map">Adding a Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../running_sepia.html#running-resource-collection-agent-example">Running Resource Collection Agent Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../running_sepia.html#manual-control">Manual Control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../first_agent.html">Your First Agent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#create-the-class">Create the Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#setup-the-configuration">Setup the Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#basic-agent-api">Basic Agent API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#actions">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#moving-your-units">Moving Your Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#collecting-resources">Collecting Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#building-units">Building Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../first_agent.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../combat_agents.html">Combat Agents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../combat_agents.html#setting-up-the-combat-agent">Setting up the Combat Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../combat_agents.html#attacking-the-enemy">Attacking the Enemy</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../packages.html">Javadoc</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/package-index.html">edu.cwru.sepia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/action/package-index.html">edu.cwru.sepia.action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/agent/package-index.html">edu.cwru.sepia.agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/agent/visual/package-index.html">edu.cwru.sepia.agent.visual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/agent/visual/editor/package-index.html">edu.cwru.sepia.agent.visual.editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/environment/package-index.html">edu.cwru.sepia.environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/environment/model/package-index.html">edu.cwru.sepia.environment.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/environment/model/history/package-index.html">edu.cwru.sepia.environment.model.history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/environment/model/persistence/package-index.html">edu.cwru.sepia.environment.model.persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/environment/model/persistence/generated/package-index.html">edu.cwru.sepia.environment.model.persistence.generated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/environment/model/state/package-index.html">edu.cwru.sepia.environment.model.state</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/experiment/package-index.html">edu.cwru.sepia.experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/start/package-index.html">edu.cwru.sepia.start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/util/package-index.html">edu.cwru.sepia.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edu/cwru/sepia/util/config/xml/package-index.html">edu.cwru.sepia.util.config.xml</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="package-index.html">matlabcontrol</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions/package-index.html">matlabcontrol.extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="internal/package-index.html">matlabcontrol.internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../org/json/package-index.html">org.json</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">SEPIA Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../packages.html">Javadoc</a> &raquo;</li>
      
          <li><a href="package-index.html">matlabcontrol</a> &raquo;</li>
      
    <li>MatlabClassLoaderHelper</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/javadoc/matlabcontrol/MatlabClassLoaderHelper.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="matlabclassloaderhelper">
<h1>MatlabClassLoaderHelper<a class="headerlink" href="#matlabclassloaderhelper" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="matlabcontrol.MatlabClassLoaderHelper">
 class <code class="descname">MatlabClassLoaderHelper</code><a class="headerlink" href="#matlabcontrol.MatlabClassLoaderHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures class loading inside of MATLAB such that it will work properly with RMI.  MATLAB uses <code class="docutils literal"><span class="pre">com.mathworks.jmi.CustomURLClassLoader</span></code> to load classes. Class loaders first ask their parent class loader to attempt to load the class and so on up the chain all the way to the system class loader. (This is by convention, one which <code class="docutils literal"><span class="pre">CustomURLClassLoader</span></code> follows). All classes listed on MATLAB&#8217;s static class path (defined in the <code class="docutils literal"><span class="pre">matlabroot/toolbox/local/classpath.txt</span></code> file where <code class="docutils literal"><span class="pre">matlabroot</span></code> is the location of MATLAB) will be known to the system class loader. As such, all Java classes listed on the static class path will be loaded by the system class loader. Classes listed on MATLAB&#8217;s dynamic class path via the <code class="docutils literal"><span class="pre">javaaddpath</span></code> function will be loaded by <code class="docutils literal"><span class="pre">CustomURLClassLoader</span></code>.  When matlabcontrol is started outside MATLAB and launches a session of MATLAB it adds itself to MATLAB&#8217;s dynamic classpath. This allows matlabcontrol&#8217;s code to run inside of MATLAB without needing to find and then modify the classpath.txt file (which also very well might not be desired by the user). When matlabcontrol is started inside MATLAB the user may have placed it on either the static or dynamic class path (the user could do both, but the static class path would be used and the dynamic would be ignored). matlabcontrol cannot initially control which class loader knows about matlabcontrol.  The reason all of this matters is because of how RMI loads classes. When RMI attempts to load a class it starts by asking the current thread for its class loader (&#64;code Thread#getContextClassLoader}. (If that does not work it can then attempt to load the class from a remote location, but this feature is not used by matlabcontrol and so this step does not occur.) The class loader that is returned by the thread RMI is running on will not be MATLAB&#8217;s <code class="docutils literal"><span class="pre">CustomURLClassLoader</span></code>. As such, RMI will not operate properly if matlabcontrol was added to the dynamic class path.  When a class loader is attempting to load a class, it starts with its parent class loader and so on up the chain. By informing the system class loader of the location of matlabcontrol, then RMI&#8217;s class loader will be able to find the matlabcontrol classes. This can be done via reflection (see <code class="xref java java-ref docutils literal"><span class="pre">addToSystemClassLoader()</span></code>. Once the system class loader knows about the classes in matlabcontrol it will load the classes. If classes have been loaded by the <code class="docutils literal"><span class="pre">CustomURLClassLoader</span></code> then problems can arise. The classes loaded by the system class loader and those loaded by <code class="docutils literal"><span class="pre">CustomURLClassLoader</span></code> will exist in separate <strong>runtime</strong> packages, meaning they can only access public classes, methods, and fields of one another.  <code class="docutils literal"><span class="pre">MatlabClassLoaderHelper</span></code> manipulates class loading. If the system class loader knows about matlabcontrol then no action is taken. Otherwise, the system class loader is told about matlabcontrol. When matlabcontrol launches a session of MATLAB this class is called before any other class is loaded, and this class is never used again. As such, if this class is loaded by the <code class="docutils literal"><span class="pre">CustomURLClassLoader</span></code>, it will not be a problem.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body"><a class="reference external" href="mailto:nonother&#37;&#52;&#48;gmail&#46;com">Joshua Kaplan</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configureclassloading">
<h3>configureClassLoading<a class="headerlink" href="#configureclassloading" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="matlabcontrol.MatlabClassLoaderHelper.configureClassLoading()">
public static void <code class="descname">configureClassLoading</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#matlabcontrol.MatlabClassLoaderHelper.configureClassLoading()" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures class loading to work properly with RMI inside MATLAB. See the class description for more detail. Called from within MATLAB when <a class="reference internal" href="RemoteMatlabProxyFactory.html#matlabcontrol.RemoteMatlabProxyFactory" title="matlabcontrol.RemoteMatlabProxyFactory"><code class="xref java java-ref docutils literal"><span class="pre">RemoteMatlabProxyFactory</span></code></a> launches a session of MATLAB.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Throws:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="MatlabConnectionException.html#matlabcontrol.MatlabConnectionException" title="matlabcontrol.MatlabConnectionException"><strong>MatlabConnectionException</strong></a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="MatlabConnectionException.html" class="btn btn-neutral float-right" title="MatlabConnectionException"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MatlabBroadcaster.html" class="btn btn-neutral" title="MatlabBroadcaster"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>